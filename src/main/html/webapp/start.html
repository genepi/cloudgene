
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">

    <title>${appname}</title>

    <!--(if target dev)><!-->
    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="assets/css/cloudgene.css" rel="stylesheet">
    <script defer src="assets/js/lib/fontawesome-5.0.8.js"></script>
    <!--<!(endif)-->


    <!--(if target dist)>
    <link href="cloudgene.vendor.min.css" rel="stylesheet">
    <script defer src="assets/fontawesome-5.0.6.js"></script>
    <!(endif)-->

  </head>

  <body class="bg-light">

    <nav class="navbar navbar-expand-md fixed-top ${foreground}" style="background: ${background};">
      <div class="container d-flex justify-content-between">

       <a class="navbar-brand" href="#!pages/home">${appname}</a>
       <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
         <span class="navbar-toggler-icon"></span>
       </button>

       <div class="collapse navbar-collapse" id="navbarsExampleDefault">
         <ul class="navbar-nav mr-auto">
           <li class="nav-item active">
             <a class="nav-link" href="#!pages/home">Home <span class="sr-only">(current)</span></a>
           </li>

					 <#if apps?size gt 0>
					 	<#if apps?size == 1>
					 		<li class="nav-item">
								<a class="nav-link" href="#!run/${apps[0].id}"> Run</a>
							</li>
						<#else>
	           	<li class="nav-item dropdown">
	             <a class="nav-link dropdown-toggle" href="#" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Run</a>
	             <div class="dropdown-menu" aria-labelledby="dropdown01">
								 <#list apps as app>
	               <a class="dropdown-item" href="#!run/${app.id}">${app.name}</a>
								 </#list>
	             </div>
	           	</li>
					 	</#if>
					 </#if>
           <li class="nav-item">
             <a class="nav-link" href="#!pages/jobs">Jobs</a>
           </li>
           <#list navigation as item>
 						<#if item.link??>
						<li class="nav-item">
							<a class="nav-link" href="${item.link}"> ${item.name}</a>
						</li>
 						<#else>
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="#" id="${item.id}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">${item.name}</a>
							<div class="dropdown-menu" aria-labelledby="${item.id}">
 									<#list item.items as subitem>
									<a class="dropdown-item" href="${subitem.link}"> ${subitem.name}</a>
 									</#list>
 								</ul>
 							</li>
 						</#if>
 					</#list>

					 <li class="nav-item">
             <a class="nav-link" href="#!pages/contact">Contact</a>
           </li>
         </ul>
         <ul class="navbar-nav my-2 my-lg-0">
           <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="dropdown02" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fas fa-user"></i> ${username}</a>
            <div class="dropdown-menu" aria-labelledby="dropdown02">
              <a class="dropdown-item" href="#!pages/profile">Profile</a>
              <div class="dropdown-divider"></div>
              <#if admin == true>
                <a class="dropdown-item" href="admin.html">Admin Panel</a>
                <div class="dropdown-divider"></div>
              </#if>
              <a class="dropdown-item" href="logout">Logout</a>
            </div>
           </li>
         </ul>
       </div>
     </div>
     </nav>

   <#if maintenaceMessage??>
     <div class="alert alert-danger" style="margin-bottom: 0px;">
       <div class="container">
         <i class="fas fa-exclamation-triangle"></i> ${maintenaceMessage}
       </div>
     </div>
   </#if>



   <div class="bg-white">
     <div id="fullsize-content" style="margin-top: 0px;" class="bg-white">
     </div>
    <div class="py-5 container">
			<div id="content" class="bd-content"></div>
    </div><!-- /.container -->
   </div>

    <footer class="text-muted">
      <div class="container">
        <p class="float-right">
          <a href="#">Back to top</a>
        </p>
        <p>${footer}</p>
      </div>
    </footer>


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
		<!--(if target dev)><!-->
		<script src="assets/js/lib/date.format.js"></script>
		<script src="assets/js/lib/jquery-3.3.1.js"></script>
		<script src="assets/js/lib/jquery.form.js"></script>
    <script src="assets/js/lib/popper.js"></script>
		<script src="assets/js/lib/bootstrap.js"></script>
		<script src="assets/js/lib/bootbox.min.js"></script>
		<script src="assets/js/lib/can.jquery.js"></script>

    <script src="models/Application.js"></script>
	<script src="models/Cluster.js"></script>
	<script src="models/Counter.js"></script>
	<script src="models/Group.js"></script>
	<script src="models/Job.js"></script>
	<script src="models/JobAdminDetails.js"></script>
	<script src="models/JobOperation.js"></script>
	<script src="models/JobDetails.js"></script>
	<script src="models/Settings.js"></script>
	<script src="models/Template.js"></script>
	<script src="models/User.js"></script>
	<script src="models/UserToken.js"></script>
	<script src="controllers/SubmitJobPage.js"></script>
	<script src="controllers/Helpers.js"></script>
	<script src="controllers/UserLoginForm.js"></script>
	<script src="controllers/HomePage.js"></script>
	<script src="controllers/ErrorPage.js"></script>
	<script src="controllers/StaticPage.js"></script>
	<script src="controllers/UpdateProfilePage.js"></script>
	<script src="controllers/JobListPage.js"></script>
	<script src="controllers/JobDetailsPage.js"></script>
	<script src="controllers/Tabs.js"></script>
		<!--<!(endif)-->


		<!--(if target dist)>
		<script src="cloudgene.vendor.min.js"></script>
		<script src="cloudgene.min.js"></script>
		<!(endif)-->



    <script>
		var app;
		$(document)
				.ready(
						function() {
						$(document.links).filter(function() {
						  return this.hostname != window.location.hostname;
						}).attr('target', '_blank');
							// add token to every ajax request
							$.ajaxPrefilter(function(options) {
								if (!options.beforeSend) {
									options.beforeSend = function(xhr) {
										if (localStorage.getItem("cloudgene")) {
											try {
												// get data
												var data = JSON.parse(localStorage.getItem("cloudgene"));
												xhr.setRequestHeader("X-CSRF-Token", data.csrf);
											} catch (e) {
											}
										}
									}
								}
							});

							tabs = new Tabs("#tabfolder");
							<#if apps?size gt 0>
							can.route("run/:app", {app: "${apps[0].id}"});
							</#if>
							can.route.ready();

						});
	</script>


  <#if google_analytics??>
    <!-- Google Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', ' ${google_analytics}', 'auto');
    ga('send', 'pageview');

    </script>
  	<!-- End Google Analytics -->
  </#if>

  </body>
</html>
